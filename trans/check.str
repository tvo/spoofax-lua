module check

imports
  libstratego-lib
  include/Lua
  lib/editor-common.generated
  desugar
  globals
  rename

rules

  analyze:
    (ast, path, project-path) -> ast'
    with
      ast' := <desugar-top;
               rename-top;
               globals-top> ast

rules

  check-note = fail

  check-warning = fail

  check-error:
    file@ File(Some(comment), _) -> (comment, $[Construct may not be preceded by layout])
    where
      <origin-text; not(string-starts-with(|"#"))> file
